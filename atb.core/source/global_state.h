#pragma once

// -----------------------------------------------------------------------------
// std
// -----------------------------------------------------------------------------
#include <vector>

// -----------------------------------------------------------------------------
// custom
// -----------------------------------------------------------------------------
#include "constants.h"
#include "atb_settings.h"

namespace atb {
    namespace core {

        // ---------------------------------------------------------------------
        // common state
        // ---------------------------------------------------------------------
        typedef struct _tag_detection_state {

            // -----------------------------------------------------------------
            // tag zone table memory
            // -----------------------------------------------------------------
            tag_zone_history* tag_zone_table;
            std::vector<tag_zone_history*> in_use_table_lines;
            std::vector<tag_zone_history*> free_table_lines;

            // -----------------------------------------------------------------
            // timestamp map
            // -----------------------------------------------------------------
            long* timstamp_map;

            // -----------------------------------------------------------------
            // current state, each tag can only be deemed in one zone.
            // -----------------------------------------------------------------
            // some current state variable.
        } tag_detection_state;

        // ---------------------------------------------------------------------
        // SYNC state
        // ---------------------------------------------------------------------
        typedef struct _sync_state {
            tag_detection_state detection_satate;
        } sync_satate;

        // ---------------------------------------------------------------------
        // WO state
        // ---------------------------------------------------------------------
        typedef struct _wo_state {
            tag_detection_state detection_state;
        } wo_satate;
    }
}